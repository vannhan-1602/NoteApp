<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Note App ƒê∆°n Gi·∫£n</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light p-4">
    <div class="container" style="max-width: 500px">
        <h2 class="text-center mb-4">üìù Ghi Ch√∫ C·ªßa T√¥i</h2>
        
        <div class="input-group mb-3">
            <input type="text" id="noteInput" class="form-control" placeholder="Vi·∫øt g√¨ ƒë√≥...">
            <button class="btn btn-primary" onclick="addNote()">Th√™m</button>
        </div>

        <ul id="noteList" class="list-group">
            </ul>
    </div>

    <script>
        // QUAN TR·ªåNG: ƒê√¢y l√† link Backend Render c·ªßa b·∫°n (l·∫•y t·ª´ ·∫£nh b·∫°n g·ª≠i)
        const API_URL = "https://noteapp-mkaw.onrender.com/api/notes";

        // 1. H√†m t·∫£i danh s√°ch ghi ch√∫
        async function loadNotes() {
            try {
                const res = await fetch(API_URL);
                const data = await res.json();
                
                const list = document.getElementById('noteList');
                list.innerHTML = ""; // X√≥a c≈©
                data.forEach(note => {
                    const li = document.createElement('li');
                    li.className = "list-group-item";
                    li.textContent = note.content;
                    list.appendChild(li);
                });
            } catch (err) {
                console.error("L·ªói:", err);
            }
        }

        // 2. H√†m th√™m ghi ch√∫
        async function addNote() {
            const input = document.getElementById('noteInput');
            const content = input.value;
            if (!content) return;

            try {
                await fetch(API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ content })
                });
                input.value = "";
                loadNotes(); // T·∫£i l·∫°i danh s√°ch
            } catch (err) {
                alert("L·ªói k·∫øt n·ªëi server!");
            }
        }

        // T·∫£i ghi ch√∫ ngay khi m·ªü web
        loadNotes();
    </script>
</body>
</html>